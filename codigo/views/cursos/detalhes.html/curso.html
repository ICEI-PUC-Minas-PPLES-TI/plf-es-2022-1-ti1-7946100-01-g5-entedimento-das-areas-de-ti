<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="film, filme, filme online, assistir filme, filme hd">
    <meta name="description" content="Veja filmes sem sair de casa, online e hd. Não é pirataria, juro." />
    <title>Cursos de TI</title>

    <!-- BOOTSTRAP 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>

    <!-- FONT AWESOME 5 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="../../style.css">

    <!-- PAGE ICON -->
    <link rel="icon" href="../../../assets/img/logo-pequeno.png">
</head>
<body>
    <div class="home-background">
        <header class="header">
            <div class="container">
                <nav class="navbar navbar-expand-lg">
                    <div class="container-fluid">
                        <a class="navbar-brand me-2 me-sm-5" href="#">
                          <img src="../../../assets/img/logo-pequeno.png" height="100" alt="Portal de Cursos">
                        </a>
                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar"
                          aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
                          <i class="fas fa-bars h1 mb-0"></i>
                        </button>
                        <div class="collapse navbar-collapse" id="navbar">
                            <ul class="navbar-nav me-auto mb-2 mb-lg-0 ">
                              <li>
                                  <a class="btn btn-nav btn-outline-light nav-btn" aria-current="page" href="../cursos.html">Cursos</a>
                              </li>
                              <li class="nav-item">
                                  <a class="btn btn-nav btn-outline-light nav-btn" href="#">Formulário</a>
                              </li>
                              <li class="nav-item">
                                  <a class="btn btn-nav btn-outline-light nav-btn" href="../../universidade/universidade.html">Universidades</a>
                              </li>
                              
                            </ul>
                            <form>
                              <div class="input-group mb-2 mb-lg-0">
                                <input type="text" class="form-control" type="search" placeholder="Pesquisar" aria-label="Search"
                                  aria-describedby="basic-addon2">
                                <div class="input-group-append">
                                  <button class="btn btn-search" type="submit"><i class="fas fa-search"></i></button>
                                </div>
                              </div>
                            </form>
                            <i class="user-icon fa fa-user-circle fa-2x mb-2 mb-lg-0" aria-hidden="true"></i>
                            <i class="user-icon fas fa-sign-out-alt fa-2x mb-2 mb-lg-0" id="logout"></i>
                        </div>
                      </div>
                </nav>
            </div>
            
        </header>
    <section class="mt-2">
          <div class="container">
            <div style="width: 100%; text-align: center;">
                <h1 id="titulo" style="color: black; font-weight: 900;">Titulo</h1>
            </div>
            <div class="row">
                <div class="col-sm-12 col-xm-12 col-md-6 col-lg-6 col-xl-6" style="display: flex; align-items: center;" style="display: flex; align-items: center; height: 500px;">
                    <img id="img1" src="https://img.freepik.com/fotos-gratis/imagem-aproximada-em-tons-de-cinza-de-uma-aguia-careca-americana-em-um-fundo-escuro_181624-31795.jpg?w=2000" width="100%" alt="Portal de Cursos" style="border-radius: 10%; max-height: 500px;">'
                </div>
                <div class="col-sm-12 col-xm-12 col-md-6 col-lg-6 col-xl-6" style="display: flex; align-items: center; min-height: 500px;">
                    <p style="text-align: justify; font-size: large; color:black;" id="paragrafo1">Lorem ipsum dolor sit amet consectetur adipisicing elit. Deleniti necessitatibus, cupiditate nesciunt tempora, culpa eaque optio numquam assumenda earum maiores beatae corporis corrupti eligendi expedita dolorem ipsa ipsum doloremque. Voluptate non impedit harum repellendus corrupti animi libero! Cum, aspernatur fuga!</p>
                </div>
            </div>
            <div class="row mt-5">
                <div class="col-sm-12 col-xm-12 col-md-6 col-lg-6 col-xl-6" style="display: flex; align-items: center; min-height: 500px;">
                    <p style="text-align: justify; font-size: large; color:black;" id="paragrafo2">Lorem ipsum dolor sit amet consectetur adipisicing elit. Deleniti necessitatibus, cupiditate nesciunt tempora, culpa eaque optio numquam assumenda earum maiores beatae corporis corrupti eligendi expedita dolorem ipsa ipsum doloremque. Voluptate non impedit harum repellendus corrupti animi libero! Cum, aspernatur fuga!</p>
                </div>
                <div class="col-sm-12 col-xm-12 col-md-6 col-lg-6 col-xl-6" style="display: flex; align-items: center; height: 500px;">
                    <div style="width: 50%; margin:auto;">
                        <div id="select">
                            <select class="form-control" name="" id="select-change">
                                <option value="" selected>PUC</option>
                            </select>
                        </div>
                        <p>Preço: R$ <span id="precoCurso">900,00</span></p>
                    </div>
                    

                </div>
            </div>
          </div>
    </section>

    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="http://jqueryvalidation.org/files/dist/jquery.validate.js"></script>
    <script src="../../db_seeder.js"></script>
    <script src="../../main.js"></script>
</body>

<script>

    const urlParams = new URLSearchParams(window.location.search);
    console.log(urlParams.get('id'));
    const curso = JSON.parse(localStorage.getItem('db_cursos')).find(x => x.id == urlParams.get('id'));
    const universidades = JSON.parse(localStorage.getItem('db_universidades')).filter(x => x.curso_id == urlParams.get('id'));
    $(document).ready( function () { 
        console.log(urlParams.get('id'), curso);
        carregaDados();
        carregaSelect();
    });
    
    function carregaDados(){
        $('#img1').attr("src",curso.img);
        /*$('#img2').attr("src",manchete.img2);*/
        $('#titulo').html(curso.nome);
        $('#paragrafo1').html(curso.descricao);
        $('#paragrafo2').html(curso.descricao);
    }

    function carregaSelect(){
        var html = '';
        html += '<select class="form-control" id="select-change">'
        universidades.map(x => {
            html += '<option value="'+x.preco+'">'+x.nome+'</option>'
        })
        
        html += '</select>'
        //html += '<p>Preço: R$ <span id="precoCurso">'+universidades[0].preco+'</span>,00</p>'
        $('#select').html(html);
        var select = document.getElementById('select-change');
        select.addEventListener('change', change)
    }

    function change(){
        console.log($(this).val());
        let valor = $(this).val();  
        $('#precoCurso').html(valor);
    }
    
</script>